(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{6840:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(1484)}])},1294:function(e,t,r){"use strict";r.d(t,{P:function(){return i},TE:function(){return u},qj:function(){return o},qo:function(){return l},x2:function(){return n}});let n=4,i=16,l=288,u=464,o=100},7730:function(e,t,r){"use strict";r.d(t,{G:function(){return h},Z:function(){return _}});for(var n,i=r(5893),l=r(1294),u=r(4439),o=256,a=[];o--;)a[o]=(o+256).toString(16).substring(1);var s=function e(t,r){if(t===r)return!0;if(null===t||"object"!=typeof t||null===r||"object"!=typeof r)return!1;let n=Object.keys(t),i=Object.keys(r);if(n.length!==i.length)return!1;for(let l of n)if(!i.includes(l)||!e(t[l],r[l]))return!1;return!0};function c(){let e=[];for(let t=0;t<l.x2;t++)e[t]=Array(l.x2).fill(null);return e}let d=(e,t)=>{let r=c(),n={},i=!1,{score:u}=e,o="move_up"===t||"move_left"===t,a="move_up"===t||"move_down"===t;for(let t=0;t<l.x2;t++){let c,d=o?0:l.x2-1;for(let f=o?0:l.x2-1;o?f<l.x2:f>=0;o?f++:f--){let l=a?e.board[f][t]:e.board[t][f],v=e.tiles[l];if(l){if((null==c?void 0:c.value)===v.value){u+=2*c.value,n[c.id]={...c,value:2*c.value},n[l]={...v,position:a?[t,o?d-1:d+1]:[o?d-1:d+1,t]},c=void 0,i=!0;continue}a?r[d][t]=l:r[t][d]=l,n[l]={...v,position:a?[t,d]:[d,t]},c=n[l],s(v.position,a?[t,d]:[d,t])||(i=!0),o?d++:d--}}}return{...e,board:r,tiles:n,hasChanged:i,score:u}},f={board:c(),tiles:{},tilesByIds:[],hasChanged:!1,score:0,isGameOver:!1};function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"clean_up":{let t=(function e(t){return Array.isArray(t)?t.reduce((t,r)=>t.concat(e(r)),[]):[t]})(e.board).reduce((t,r)=>r?{...t,[r]:e.tiles[r]}:t,{});return{...e,tiles:t,tilesByIds:Object.keys(t),hasChanged:!0}}case"create_tile":{let r=function(e){var t=0;if(!n||o+11>512)for(n="",o=0;t<256;t++)n+=a[256*Math.random()|0];return n.substring(o,o+++11)}(),[i,l]=t.tile.position,u=JSON.parse(JSON.stringify(e.board));return u[l][i]=r,{...e,board:u,tiles:{...e.tiles,[r]:{id:r,...t.tile}},tilesByIds:[...e.tilesByIds,r],hasChanged:!1}}case"move_up":case"move_down":case"move_left":case"move_right":return d(e,t.type);case"game_over":return{...e,isGameOver:!0};case"game_reset":return f;default:return e}}var p=r(7294);let h=(0,p.createContext)({score:0,isGameOver:!1,getTiles:()=>[],moveTiles:e=>{},startGame:()=>{},restartGame:()=>{}});function _(e){let{children:t}=e,[r,n]=(0,p.useReducer)(v,f),o=(0,p.useCallback)(()=>{let e=[];for(let t=0;t<l.x2;t++)for(let n=0;n<l.x2;n++)r.board[n][t]||e.push([t,n]);return e},[r.board]),a=(0,p.useCallback)(()=>{if(o().length>0)return!1;for(let n=0;n<l.x2;n++)for(let o=0;o<l.x2;o++){let l=r.board[n][o];if(l){var e,t,i,u,a,s,c,d,f;let v=null===(e=r.board[n-1])||void 0===e?void 0:e[o],p=null===(t=r.board[n+1])||void 0===t?void 0:t[o],h=null===(i=r.board[n])||void 0===i?void 0:i[o-1],_=null===(u=r.board[n])||void 0===u?void 0:u[o+1],m=null===(a=r.tiles[l])||void 0===a?void 0:a.value,b=null===(s=r.tiles[v])||void 0===s?void 0:s.value,g=null===(c=r.tiles[p])||void 0===c?void 0:c.value,y=null===(d=r.tiles[h])||void 0===d?void 0:d.value,x=null===(f=r.tiles[_])||void 0===f?void 0:f.value;if(m===b||m===g||m===y||m===x)return!1}}return n({type:"game_over"})},[r.board,o,r.tiles]),s=(0,p.useCallback)(()=>{let e=o();if(e.length>0){let t=Math.floor(Math.random()*e.length);n({type:"create_tile",tile:{position:e[t],value:2}})}a()},[o,a]),c=(0,u.Z)(e=>{n({type:e}),a()},1.05*l.qj,{trailing:!1}),d=()=>{n({type:"create_tile",tile:{position:[0,1],value:2}}),n({type:"create_tile",tile:{position:[0,2],value:2}})};return(0,p.useEffect)(()=>{r.hasChanged&&setTimeout(()=>{n({type:"clean_up"}),s()},l.qj)},[s,r.hasChanged]),(0,i.jsx)(h.Provider,{value:{score:r.score,isGameOver:r.isGameOver,getTiles:()=>r.tilesByIds.map(e=>r.tiles[e]),moveTiles:c,startGame:d,restartGame:()=>{n({type:"game_reset"}),d()}},children:t})}},1484:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(5893),i=r(7730);function l(e){let{Component:t,pageProps:r}=e;return(0,n.jsx)(i.Z,{children:(0,n.jsx)(t,{...r})})}r(7133)},4439:function(e,t,r){"use strict";var n=r(7294);t.Z=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,n.useRef)(0),l=(0,n.useRef)([]),u=(0,n.useRef)(),{trailing:o=!0}=r;return(0,n.useEffect)(()=>(o&&void 0===u.current&&(u.current=setTimeout(()=>{e.apply(null,l.current),u.current=void 0},t)),()=>{u.current&&clearTimeout(u.current)}),[e,t,o]),function(){for(var r=arguments.length,n=Array(r),u=0;u<r;u++)n[u]=arguments[u];let o=new Date().getTime();if(o-i.current<t){l.current=n;return}return i.current=o,l.current=n,e.apply(null,n)}}},7133:function(){}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(6840),t(3035)}),_N_E=e.O()}]);